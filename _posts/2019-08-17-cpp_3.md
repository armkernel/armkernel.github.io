---
layout : post
title : Cpp study_190817_ver2
tags : [Cpp]
comments: true
---
### C++ study (Lec.)

#### Trivial
- Trivial은 하찮은 이런 뜻이다. 
- C++ 내에서는 만약, 사용자가 생성자를 생성하지 않으면, 컴파일러에서 암묵적으로 생성자를 생성해준다. 이 때, 생성자를 default 생성자라고 한다. 
- 생성자에서는 많은 일들을 할 수 있다. 가상함수 테이블 초기화, 기반 클래스 또는 맴버의 생성자 호출 등등 많은 일들을 할 수 있는데, 만약 이런 일들을 하지 않는 생성자를 trivial하다고 정의한다.
  - 생성자를 사용자가 정의하지 않아도 클래스 내부에서 가상함수를 사용한다면, 생성자가 가상함수 테이블을 초기화하는 역할을 함으로 ***trivial 하지 않다*** 라고 한다. 

#### Trivial이 필요한 이유
- 템플릿을 이용해 일반화 알고리즘을 만들 때, trivial 여부에 따라 최적화 코드를 제공할 수 있다.
- 예를들어 copy 알고리즘을 만들 때, 생성자에서 어떤 일을 하지 않는 다면, memcpy를 통해 초기화 할 수 있다. 하지만, 동적할당과 같이 어떤 동작을 할 경우 깊은 복사 즉 모든 내용을 복사해야하며, 복사생성자를 호출해야할 경우도 발생한다. 
- trivial 유무를 판단하기 위해서 C++에서는 문법을 제공한다.
  - is_trivially_copyable<T>::value 
  - 위 문법을 조건문에 걸게 된다면, trivial 한 클래스인지를 판단하게 된다. 만약 클래스가 trivial하지 않다면, 깊은 복사를 수행하면 된다.
